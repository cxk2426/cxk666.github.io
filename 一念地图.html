<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>一念地图工具</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f5f5f5;
        }

        #errorImage {
            display: block;
            margin: 0 auto;
            max-width: 80%;
            /* 根据需要调整图片的最大宽度 */
        }

        #mapSearchInput {
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 3px;
            width: 200px;
            margin-bottom: 10px;
            font-size: 0.8em;
        }

        button {
            padding: 8px 15px;
            border: none;
            border-radius: 3px;
            background-color: #0099FF;
            color: white;
            cursor: pointer;
            transition: background-color 0.3s ease;
            margin: 5px 0;
        }

        #customInput {
            max-width: 150px;
            font-size: 18px;
            margin-top: -10px;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
        }

        input[type="text"] {
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 3px;
            width: 120px;
            font-size: 1.0em;
        }

        button:hover {
            background-color: #0099ff;
        }

        #openIndexButton {
            background-color: transparent;
            border: none;
            color: white;
            font-size: 16px;
            cursor: pointer;
            position: fixed;
            top: 2px;
            left: 40%;
            padding: 10px;
            opacity: 0;
            /* 设置按钮透明度为0.8 */
        }

        #resultArea {
            margin: 10px auto;
            margin-top: -20px;
            border: 0px solid #ccc;
            border-radius: 3px;
            padding: 1px;
            width: 350px;
            background-color: white;
        }

        #resultBox {
            margin-top: 10px;
            display: grid;
            grid-template-columns: 1fr;
            grid-template-rows: repeat(auto-fit, minmax(30px, auto));
            gap: 5px;
        }

        #resultBox div {
            background-color: #f9f9f9;
            padding: 5px;
            text-align: left;
            border-radius: 3px;
            overflow: hidden;
            white-space: nowrap;
            text-overflow: ellipsis;
        }

        #resultBox ul {
            list-style-type: none;
            margin: 0;
            padding: 0;
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            grid-gap: 5px;
        }

        button {
            margin-left: 5px;
        }

        .button-group button {
            margin: -5px -1;
        }

        #shortcutButtonText {
            color: #0099ff;
            margin-top: -10px;
            /* 设置 margin-top 为负值，使元素向上移动 */
        }

        .copy-result-container {
            display: flex;
            align-items: center;
            margin-top: 5px;
        }

        .copy-result-container input[type="text"] {
            flex: 1;
            margin-right: 5px;
            background-color: #e6f7ff;
            border: none;
            padding: 10px 10px;
            font-size: 0.8em;
            text-align: left;
            border-radius: 3px;
            max-width: 100px;
        }

        .copy-result-container button {
            margin-left: 0;
        }

        .custom-input-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            /* 使按钮在水平方向上均匀分布，两端对齐 */
        }

        .custom-input-container button {
            margin-left: 5px;
            white-space: nowrap;
        }

        .custom-alert {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 300px;
            padding: 20px;
            background-color: #fff;
            border-radius: 5px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
            text-align: center;
        }

        .custom-alert p {
            margin-bottom: 15px;
        }

        .custom-alert button {
            padding: 8px 15px;
            border: none;
            border-radius: 3px;
            background-color: #0099FF;
            color: white;
            cursor: pointer;
        }

        #aiButton {
            margin-top: 10px;
        }

        #aiInput {
            width: 200px;
            margin-top: 10px;
        }

        #aiAlert {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 200px;
            padding: 15px;
            background-color: #fff;
            border-radius: 5px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
            text-align: center;
        }
    </style>
</head>
<img id="errorImage" src="https://fs-im-kefu.7moor-fs1.com/ly/4d2c3f00-7d4c-11e5-af15-41bf63ae4ea0/1735228252953/Image_557751751358951.jpg" alt="贝利亚奥特曼" style="display: none;">

<body style="background-color: #f0f0f0; background-image: url('https://fs-im-kefu.7moor-fs1.com/ly/4d2c3f00-7d4c-11e5-af15-41bf63ae4ea0/1734591713155/Image_1729705974323.jpg');background-repeat: no-repeat; background-size: cover;">
    <div class="container">
        <h1 style="font-family: 'Brush Script MT', cursive; color: #336699;">一念地图
            <select id="mapTypeMenu">
                <option value="allLocations">查看全图</option>
                <option value="customPortals">查看仙居</option>
            </select>
            <button id="openIndexButton" onclick="openIndexPage()">打开index</button>
            <button onclick="showLocations()">全图 or 仙居</button>
        </h1>
        <button onclick="goToImage()">地图图片</button>
        <select id="copyOptionSelect">
            <option value="npc任务">npc</option>
            <option value="打 boss">打 boss</option>
            <option value="灵兽捕捉 4">灵兽捕捉</option>
            <option value="进入藏宝地">进入藏宝地</option>
        </select>
        <select id="portalTypeMenu">
            <option value="portalOne">天四以上传送点</option>
            <option value="portalTwo">天四以下传送点</option>
        </select>
        <button id="findNearestPortalButton" onclick="findNearestPortal()">查找最近传送点</button>
        <button onclick="switchPortal()">切换传送点</button>
        <button onclick="goToTreasureMap()">查藏宝地</button>
        <input type="text" id="locationInput" placeholder="输入地点名称" style="width: 100px; height: 30px; font-size: 14px; display: inline-block;">
        <input type="password" id="passwordInput" placeholder="输入密码验证" style="width: 83px; height: 20px; font-size: 16px;">
        <button onclick="openDoubaoPage()">打开豆包</button>
        <div class="custom-input-container">
            <textarea id="customInput" rows="2" placeholder="添加仙居（换行）"></textarea>
            <button onclick="addCustomPortals()">添加仙居</button>
            <button onclick="addAllPortals()">添加仙居库</button>
        </div>
        <div id="customAlert" class="custom-alert">
            <p id="alertMessage"></p>
            <button onclick="closeAlert()">确定</button>
        </div>
    </div>
    <div id="addedPortalsList"></div>
    <div id="aiAlert" class="custom-alert">
    </div>
    <div id="resultArea">
        <div id="resultBox"></div>
    </div>
    </div>
    <script>
        const urlParams = new URLSearchParams(window.location.search);
        const mapName = urlParams.get('mapName');
        if (mapName) {
            const locationInput = document.getElementById('locationInput');
            locationInput.value = mapName;
        }
        document.getElementById('copyOptionSelect').addEventListener('change', function() {
            const selectedOption = this.value;
            const textarea = document.createElement('textarea');
            textarea.value = selectedOption;
            document.body.appendChild(textarea);
            textarea.select();
            try {
                document.execCommand('copy');
                console.log('已复制到剪贴板');
                showAlert('复制成功：' + selectedOption, true);
            } catch (err) {
                console.error('复制失败: ', err);
                showAlert('复制失败：' + selectedOption + '，请重试。', false);
            }
            document.body.removeChild(textarea);
        });
        const portals = ["北郡", "风祝山巅", "蛇沙滩", "长生天府", "葬灵墟", "雾隐仙峤", "碧海茶原", "桃源居", "金矿山", "仙海"];
        const maxPerRow = 5; // 每行最多显示的数量
        let currentRow = [];
        portals.forEach((portal, index) => {
            const p = document.createElement('p');
            p.textContent = portal;
            p.style.fontSize = "0px";
            p.style.lineHeight = "0.8em";
            p.style.color = "rgba(0, 0, 0, 0)";
            currentRow.push(p);
            if (currentRow.length === maxPerRow || index === portals.length - 1) {
                const rowDiv = document.createElement('div');
                currentRow.forEach(p => rowDiv.appendChild(p));
                document.getElementById('addedPortalsList').appendChild(rowDiv);
                currentRow = [];
            }
        });

        function goToImage() {
            window.location.href = "image.html";
        }

        function openDoubaoPage() {
            window.location.href = "doubao.html";
        }

        window.showAlert = function(message) {
            const alertDiv = document.getElementById('customAlert');
            const alertMessage = document.getElementById('alertMessage');
            alertMessage.textContent = message;
            alertDiv.style.display = 'block';
        }

        window.closeAlert = function() {
            const alertDiv = document.getElementById('customAlert');
            alertDiv.style.display = 'none';
        }

        function closeAlert() {
            const alertDiv = document.getElementById('customAlert');
            alertDiv.style.display = 'none';
        }

        function addAllPortals() {
            const portalsElements = addedPortalsList.querySelectorAll('p');
            portalsElements.forEach(function(element) {
                const portal = element.textContent;
                if (portal && !customPortals.includes(portal)) {
                    customPortals.push(portal);
                }
            });
            showAlert('所有仙居已成功添加到自定义传送点列表。');
            console.log('所有仙居已添加到自定义传送点列表。');
        }

        function copyenter() {
            var textToCopy = "进入藏宝地";
            const textarea = document.createElement('textarea');
            textarea.value = textToCopy;
            document.body.appendChild(textarea);
            textarea.select();
            try {
                document.execCommand('copy');
                console.log('新的复制按钮：已复制进入藏宝地内容成功');
                showAlert('复制成功：进入藏宝地');
            } catch (err) {
                console.error('新的复制按钮：复制失败: ', err);
                showAlert('复制进入藏宝地失败');
            }
            document.body.removeChild(textarea);
        }

        function copyTask() {
            var textToCopy = "npc任务";
            const textarea = document.createElement('textarea');
            textarea.value = textToCopy;
            document.body.appendChild(textarea);
            textarea.select();
            try {
                document.execCommand('copy');
                console.log('新的复制按钮：已复制npc任务内容成功');
                showAlert('复制成功：npc任务');
            } catch (err) {
                console.error('新的复制按钮：复制失败: ', err);
                showAlert('复制npc任务失败');
            }
            document.body.removeChild(textarea);
        }

        function copyAnimals() {
            var textToCopy = "灵兽捕捉 4";
            const textarea = document.createElement('textarea');
            textarea.value = textToCopy;
            document.body.appendChild(textarea);
            textarea.select();
            try {
                document.execCommand('copy');
                console.log('新的复制按钮：复制内容成功');
                showAlert('复制成功：灵兽捕捉 4');
            } catch (err) {
                console.error('新的复制小题：复制失败: ', err);
                showAlert('复制灵兽捕捉 4失败');
            }
            document.body.removeChild(textarea);
        }

        function openIndexPage() {
            window.location.href = 'index.html';
        }

        function copyBossText() {
            const textToCopy = "打boss";
            const textarea = document.createElement('textarea');
            textarea.value = textToCopy;
            document.body.appendChild(textarea);
            textarea.select();
            try {
                document.execCommand('copy');
                console.log('打boss文字已复制到剪贴板');
                showAlert('复制成功：打boss');
            } catch (err) {
                console.error('复制失败: ', err);
                showAlert('复制失败');
            }
            document.body.removeChild(textarea);
        }

        function copyToClipboard(text) {
            const textarea = document.createElement('textarea');
            textarea.value = text;
            document.body.appendChild(textarea);
            textarea.select();
            try {
                document.execCommand('copy');
                console.log('已复制到剪贴板');
                showAlert('复制成功！', true);
            } catch (err) {
                console.error('复制失败: ', err);
                showAlert('复制失败，请重试。', false);
            }
            document.body.removeChild(textarea);
        }

        function clearCustomPortalsButton() {
            var addedPortalsList = document.getElementById('addedPortalsList');
            addedPortalsList.innerHTML = "";
            console.log('已添加仙居已清空');
        }

        function showLocations() {
            const option = document.getElementById('mapTypeMenu').value;
            if (option === 'allLocations') {
                showAllLocations();
            } else if (option === 'customPortals') {
                showCustomPortals();
            }
        }

        function showAllLocations() {
            const inputLocation = document.getElementById('locationInput').value.trim();
            if (inputLocation === "") {
                const resultContainer = document.createElement('div');
                resultContainer.id = 'matchingListContainer';
                const matchingList = document.createElement('ul');
                matchingList.id = 'matchingList';
                const allLocations = locations;
                allLocations.forEach((location, index) => {
                    const listItem = document.createElement('li');
                    listItem.textContent = `${location}(${index + 1})`;
                    listItem.addEventListener('click', () => {
                        const locationWithoutNumber = location;
                        document.getElementById('locationInput').value = locationWithoutNumber;
                        findNearestPortal();
                        document.getElementById('findNearestPortalButton').click();
                    });
                    matchingList.appendChild(listItem);
                });
                resultContainer.appendChild(matchingList);
                const result = document.getElementById('resultBox');
                result.innerHTML = '';
                result.appendChild(resultContainer);
            } else {
                const firstChar = inputLocation.charAt(0);
                const uniqueFirstChars = [...new Set(locations.map(location => location.charAt(0)))];
                if (uniqueFirstChars.includes(firstChar) && document.getElementById('findNearestPortalButton')) {
                    findNearestPortalForFirstChar(firstChar);
                } else {
                    const resultContainer = document.createElement('div');
                    resultContainer.textContent = '没有以该首字开头的地点。';
                    const result = document.getElementById('resultBox');
                    result.innerHTML = '';
                    result.appendChild(resultContainer);
                }
            }
        }

        function showCustomPortals() {
            const resultContainer = document.createElement('div');
            resultContainer.id = 'matchingListContainer';
            const matchingList = document.createElement('ul');
            matchingList.id = 'matchingList';
            const allLocations = customPortals;
            allLocations.forEach((location, index) => {
                const listItem = document.createElement('li');
                listItem.textContent = `${location}(${index + 1})`;
                listItem.addEventListener('click', () => {
                    const locationWithoutNumber = location;
                    const locationInput = document.getElementById('locationInput');
                    if (locationInput) {
                        locationInput.value = locationWithoutNumber;
                        findNearestPortal();
                        const findNearestPortalButton = document.getElementById('findNearestPortalButton');
                        if (findNearestPortalButton) {
                            findNearestPortalButton.click();
                        }
                    }
                });
                matchingList.appendChild(listItem);
            });
            resultContainer.appendChild(matchingList);
            const result = document.getElementById('resultBox');
            if (result) {
                result.innerHTML = '';
                result.appendChild(resultContainer);
            }
        }

        function receiveLocationFromTreasureMap(location) {
            const locationInput = document.getElementById('locationInput');
            if (locationInput) {
                locationInput.value = location;
            }
        }

        function goToTreasureMap() {
            const newWindow = window.open("宝图.html", "_blank");
            if (!newWindow) {
                console.error("无法打开新窗口");
            }
        }


        document.addEventListener('DOMContentLoaded', function() {
            try {
                const urlParams = new URLSearchParams(window.location.search);
                const locationFromTreasureMap = urlParams.get('location');
                if (locationFromTreasureMap) {
                    receiveLocationFromTreasureMap(locationFromTreasureMap);
                }
                const location = localStorage.getItem('treasureMapLocation');
                if (location) {
                    const destinationInput = document.getElementById('destinationInput');
                    if (destinationInput) {
                        destinationInput.value = location;
                        localStorage.removeItem('treasureMapLocation');
                    }
                }
                const isLoggedIn = localStorage.getItem('isLoggedIn');
                if (isLoggedIn === 'true') {
                    const storedPassword = localStorage.getItem('password');
                    const passwordInput = document.getElementById('passwordInput');
                    if (passwordInput) {
                        passwordInput.value = storedPassword;
                    }
                }
            } catch (error) {
                console.error('Error accessing local storage or other operations:', error);
            }
        });
    </script>
    <script>
        // 假设的地点名称数组（按顺序排列）
        const locations = ["一念仙山",
"一念天宫",
"一缺抱憾亭",
"七星山脉",
"七重天界",
"万丈海沟",
"万丈瀑布",
"万丈瀑布下",
"万剑平原",
"万灵圣地",
"万米深坑",
"万米深谷",
"万里冰封之地",
"三仙岛",
"三十三重天",
"三味书屋",
"三清宫",
"三清山",
"不周山",
"不毛之地",
"世界告白日",
"东海",
"东海龙宫",
"东胜神洲",
"东荒",
"中州",
"临川",
"临江岸",
"临潼关",
"丸山七彩宫",
"九天之上",
"九天雷池",
"九州大陆",
"九幽",
"九幽冥河",
"九幽寒潭",
"九幽星渊",
"九幽深渊",
"九幽渊",
"九幽灵沼",
"九重天",
"九霄灵域",
"九龙岛",
"乱星海",
"乾元山",
"云初",
"云壤天界",
"云悠",
"云栖里",
"云梦",
"云梦仙境",
"云梦仙池",
"云梦泽",
"云浮桥",
"云海之上",
"云海幽谷",
"云海涧",
"云漓",
"云烟",
"云落山",
"云虚宗",
"云霄玉台",
"云顶论道台",
"云鳐山脉",
"五台山",
"五气朝元峰",
"五行山脉",
"井底",
"人间意",
"仙凰岛",
"仙境图书馆",
"仙宫",
"仙寨沟",
"仙居",
"仙山",
"仙山瀑布",
"仙岛深处",
"仙果园",
"仙梦花海",
"仙气汇聚之地",
"仙气缥缈之地",
"仙泉",
"仙泉旁",
"仙海",
"仙灵岛",
"仙灵果树",
"仙灵阁",
"仙玉阁",
"仙界主峰",
"仙界码头",
"仙界秘境深处",
"仙界边界",
"仙界遗迹内部",
"仙界龙潭",
"仙羽山",
"仙羽崖",
"仙茗谷",
"仙草生长地",
"仙药田",
"仙路",
"仙遗之地",
"仙都",
"仙霞古道",
"仙音崖",
"仙风谷",
"仙鹤峰",
"仙麓",
"仙龙宝塔",
"伏羲仙府",
"伏龙山",
"伏龙潭",
"伏龙灵池",
"会稽",
"余杭镇",
"你给我的所有",
"你莓柿吧",
"佳梦关",
"修仙界边境",
"修炼室",
"修真界战场",
"倒影湖海",
"元界之巢",
"光华净海",
"光影幽境",
"光明之谷",
"光明洞窟",
"光明顶",
"光棱通道",
"光澜深渊",
"光焰群岚",
"光辉金塔",
"光鸣之野",
"兜率宫",
"八十八角真阳楼",
"兰若",
"兰陵",
"冒险家协会仙界",
"冥界",
"冰原",
"冰封古城",
"冰尘瀑布",
"冰心潭",
"冰焰绝地",
"冰雪山脉",
"冰雪洞窟",
"冰魄坞",
"冰魄寒域",
"凌尘阁",
"凌霄宝殿",
"凝华池",
"凝春山",
"凡间小镇",
"凤栖谷",
"出云谷",
"刃狭间",
"刹那芳华",
"剑气长城",
"化灵潭",
"化神岛",
"化羽仙谷",
"北寒仙域",
"北寒冰原",
"北郡",
"千年古道",
"千年秘境",
"千木林",
"千禧年科技学院",
"千竹涧",
"千粟秘境",
"千花山脉",
"千花谷",
"千重幻境",
"半亩方塘",
"半月海",
"南云灵墟",
"南华洞",
"南国",
"南天云海",
"南天幽域",
"南岭苍霄",
"南岳青云峰",
"南明离火域",
"南极",
"南海龙宫",
"南渊绝地",
"南焰天宫",
"南玄龙潭",
"南荒秘境",
"南蛮",
"南辰幻境",
"南风仙谷",
"原初之星",
"古仙战场",
"古代仙境",
"古代遗迹",
"古剑冢",
"古城遗址",
"古城遗迹",
"古墓内部",
"古墓内部炼丹室",
"古寺",
"古庙中",
"古族遗址",
"古月仙岛",
"古木幽林",
"古老村落",
"古老洞窟",
"古老湖泊",
"古老秘境",
"古老遗迹",
"古荒秘境",
"古药谷",
"古道仙境",
"听松阁",
"听海阁",
"听涛阁",
"听雪峰",
"听雪崖",
"听雪楼",
"听香水榭",
"呼哇呼哇丸彩山",
"命运之塔",
"命运之巅",
"命运神殿",
"商南",
"喜烛殿",
"喵次元宇宙",
"回音山谷",
"回响",
"因你而在的故事",
"圣地之心",
"地底洞穴",
"地心",
"地心熔岩池",
"地火深渊",
"坊市",
"堕日岭",
"多维交叉核心",
"夜月之岛",
"夜魇山脉",
"大型扫地机器人",
"大海",
"大罗天",
"大行山",
"天上天宫",
"天书奇谭",
"天云峰",
"天人秘境",
"天仙观",
"天元山",
"天剑岭",
"天台",
"天台山",
"天地宝库",
"天地异变现场",
"天地熔炉",
"天域传送门",
"天境幻阵",
"天墟古林",
"天外天",
"天山之巅",
"天崖灵洞",
"天庭",
"天心山",
"天春之境",
"天机殿",
"天机阁",
"天枢之地",
"天梯山",
"天池",
"天池圣湖",
"天池岛",
"天河之上",
"天瀑灵崖",
"天灵洞府",
"天灾之域",
"天玄塔",
"天玑星域",
"天玑洞府",
"天璇峰",
"天界中殿",
"天界之门",
"天界裁决殿",
"天空之城",
"天空之境",
"天空之海",
"天绝崖",
"天罗困仙阵",
"天罡塔",
"天翔崖",
"天衍",
"天衍仙岛",
"天道之巅",
"天道试炼场",
"天都仙域",
"天门山",
"天际地平线",
"天雷台",
"天雷浩瀚",
"天雷绝崖",
"天音湖",
"天香",
"太上忘情谷",
"太乙仙宫",
"太乙仙池",
"太初云墟",
"太初古界",
"太初境",
"太初灵玉峰",
"太初秘境",
"太华山",
"太古荒天",
"太古遗界",
"太古遗迹",
"太墟岛",
"太宇极星天宫",
"太极宫",
"太清云台",
"太清仙境",
"太湖中心",
"太虚",
"太虚仙府",
"太虚古道",
"太虚回廊",
"太虚幻境",
"太虚星河",
"太虚神域",
"太虚观",
"太虚谷",
"奇异沙漠",
"奈何崖",
"奈何桥",
"奈幽村",
"妖族圣地",
"姑苏",
"孤星山",
"孤烟小径",
"学园都市",
"宇宙中枢",
"宇宙枢纽",
"宇宙法则之心",
"宇宙深渊",
"宇宙混沌边缘",
"宇宙结界交汇点",
"宇宙边界",
"宗门丹房",
"宗门内院",
"宗门后山",
"宗门大门",
"宗门山门",
"宗门山门前",
"宗门广场",
"宗门比武场",
"宗门演武场",
"宗门灵兽山",
"宗门藏书阁",
"宴会大厅",
"家中",
"密林深处",
"寒冰峡谷",
"寒冰林海",
"寒山寺",
"寒月峰",
"寒月海",
"寒月谷",
"寒梅雪山",
"寒潭",
"寒潭之畔",
"寒霜雪域",
"寒风洞",
"寒香落花祠",
"寒魄崖",
"封印之地",
"小水池",
"小汤圆神界",
"小河旁",
"小竹峰",
"小镇古塔",
"尘世",
"尧都",
"居所",
"居所密室",
"居所门外",
"山中",
"山中密林",
"山中洞府",
"山外小楼",
"山崖书院",
"山巅",
"山川",
"山村剑冢",
"山林小径",
"山洞内",
"山洞深处",
"山海关",
"山海经",
"山谷",
"山谷深处",
"山谷灵泉",
"山门外",
"山间奇泉",
"山顶",
"岭南竹院",
"崆峒山",
"巨树上的蛇巢",
"巨石上的蛇符",
"师门内部",
"帝一宫",
"常盘台",
"平行世界遗迹",
"幻冰阁",
"幻域启明星",
"幻境之海",
"幻影岛",
"幻星岭",
"幻月仙境",
"幻月仙墟",
"幻月崖",
"幻月平川",
"幻月湖",
"幻梦迷心涧",
"幻海迷宫",
"幻灵山谷",
"幻灵秘境",
"幻羽仙渊",
"幽仙林",
"幽冥洞",
"幽冥边界",
"幽冥鬼域",
"幽冥鬼谷",
"幽州",
"幽星穹顶",
"幽暗星域",
"幽梦森林",
"幽梦璃",
"幽深秘境",
"幽深竹海",
"幽篁洞天",
"广寒宫",
"废旧铁矿",
"异界密林",
"异界深处",
"异界秘境",
"异界遗迹",
"归元仙境",
"归元仙岛",
"归元居",
"归墟",
"归墟之地",
"归墟海域",
"归墟海眼",
"归墟阁",
"归寂山",
"归寂灵崖",
"彩虹海",
"往世乐土",
"往生之地",
"微光寒原",
"微光秘径",
"心动仙谷",
"心动天宫",
"心界",
"忆梦仙域",
"忘川河畔",
"忘川渡",
"忘忧谷",
"思南",
"恋恋",
"恋梦缘",
"悟道潭",
"悬照台",
"惊鸿殿",
"扶摇山谷",
"扶摇道域",
"扶桑",
"扶风",
"掬月庭",
"揽月亭",
"揽月仙庭",
"揽月阁",
"断剑崖",
"断情崖",
"断桥旁",
"断肠崖",
"断雪桥",
"断魂崖",
"新手村",
"方寸山",
"旋转的时间流沙",
"无上大丹塔",
"无上大丹炉",
"无上大灵田",
"无为山",
"无名仙地",
"无名仙山",
"无名寒舍",
"无名秘境",
"无回谷",
"无垠空域",
"无垢仙宫",
"无妄坡",
"无尽之地",
"无尽剑冢",
"无尽天坑",
"无尽幻境",
"无尽海域",
"无尽深渊",
"无尽火域",
"无尽试炼之域",
"无昼山脉",
"无极仙洲",
"无极宫",
"无极玄宫",
"无极长河",
"无涯之海",
"无瑕之域",
"无界山崖",
"无界山房",
"无相星渊",
"无重力居所",
"无量仙河",
"无量仙海",
"无量界域",
"日落湾",
"时代商会",
"时代灵场",
"时光之塔",
"时光古道",
"时光古阵",
"时光流转之地",
"时光秘池",
"时光竹林",
"时分古林",
"时分灵巢",
"时刻秘径",
"时常狂风呼啸的山巅",
"时气遗迹",
"时流瀑布",
"时空之涡",
"时空交汇点",
"时空凝滞沙漠",
"时空失控之地",
"时空山崖",
"时空核心",
"时空洞窟",
"时空灵塔",
"时空灵谷",
"时空藤谷",
"时空裂缝",
"时而流水潺潺的古桥",
"时节天穹",
"时节灵地",
"时辰灵塔",
"时间天池",
"时间幻林",
"时间溪流",
"时间灵坳",
"时隐深林",
"时雨奇境",
"时雨居",
"时雨幽谷",
"昆仑",
"昆仑墟",
"昆仑瑶池",
"星光湖畔",
"星域",
"星月原",
"星月夜楼",
"星月崖",
"星河古路",
"星海",
"星海穹顶",
"星海遗迹",
"星渊",
"星渚",
"星澜仙屿",
"星澜岛",
"星澜幻原",
"星澜秘府",
"星眠居",
"星砂海",
"星穹洞天",
"星空下",
"星空中",
"星空之巅",
"星空深处",
"星空秘境",
"星芒秘洞",
"星辉沼泽",
"星辰古殿",
"星辰坞",
"星辰大海",
"星辰幻域",
"星辰幻海",
"星辰府",
"星辰殿",
"星辰池",
"星辰洞",
"星辰洞府内部",
"星辰海",
"星辰渊",
"星辰湖",
"星辰湖畔",
"星辰谷",
"星辰阁",
"星陨天墟",
"映月湖畔",
"映雪堂",
"春之岛",
"春之川",
"春之谷",
"春华山脉",
"春华岛",
"春华秘境",
"春境天池",
"春日仙林",
"春晓平原",
"春晖仙境",
"春晖谷",
"春樱之森",
"春泽之域",
"春满灵池",
"春灵谷",
"春秋阁",
"春蕾之池",
"春野仙域",
"春雨岛",
"春霞峰",
"春韵谷地",
"春风市集",
"春风洞天",
"春风渡",
"春风溪谷",
"晨时之境",
"晶光遗迹",
"智慧星球",
"暗影荒原",
"暗潮裂谷",
"暗物质核心区域",
"暗辰",
"暮影林",
"暮霭云川",
"暮霭谷",
"曦光之境",
"曦尘洞窟",
"曦晨星海",
"曦月之泉",
"曦月山脉",
"曦涛大海",
"曦澜海域",
"曦灵谷",
"曦瑶湖",
"曦羽之岛",
"曦风荒原",
"曼珠沙华",
"月光仙岛",
"月光台",
"月光秘境",
"月光阁",
"月华山庄",
"月华池",
"月华谷",
"月影幽谷",
"月影楼台",
"月影湖",
"月影花台",
"月影荒原",
"月球",
"月舞平原",
"月辉谷",
"月魂山",
"望云海",
"望仙台",
"朝暮里",
"朝歌",
"木殇",
"未来世界",
"未知之地",
"村中古井",
"极东之境",
"极北冰原",
"极寒之巅",
"极寒冰川",
"枕湖居",
"枫丹白露",
"枫落秋原",
"柯莱歌剧院",
"栖霞山",
"桂花坪",
"桂花谷",
"桃古",
"桃夭",
"桃林",
"桃源",
"桃源境",
"桃源居",
"桃溪村",
"桃缘岛",
"桃花坞",
"桃花岭",
"桃花春岭",
"桃花林",
"桃花源",
"桃花谷",
"桃花镇",
"梦回谷",
"梦境",
"梦境中的蛇域",
"梦境之地",
"梦境天",
"梦境花海",
"梦幻岛",
"梦幻星屿",
"梦泽",
"梦灵湖泊",
"梦璃幽境",
"梨月仙境",
"梨花镇",
"森林中",
"椰林海岸",
"楼兰",
"楼兰古城",
"樱落",
"檀悦府",
"次元幻想乡",
"步云轩",
"武境",
"武当山",
"武陵溪",
"残阳殿",
"残雪桥",
"毒沼",
"民宅",
"永恒云巅",
"永恒仙域",
"江上",
"江夏",
"沁水",
"沧海桑田",
"沧溟",
"沧澜仙岛",
"河流",
"河畔渔家",
"法则交错点",
"法界之顶",
"泪洒小河边",
"泰山顶",
"洛神川",
"洞府丹房",
"洞府深处",
"洞庭",
"洞庭春",
"流云宫",
"流云岛",
"流云幻池",
"流云花溪",
"流光秘海",
"流萤幻海",
"流萤漫谷",
"流萤的秘密基地",
"流萤谷",
"浩渺星辰",
"浮光岛",
"浮生镜湖",
"浮空岛",
"海域九绝岛",
"海天幻境",
"海市蜃楼",
"海底蛇窟",
"海星神宫",
"海月仙域",
"海渊幽谷",
"海潮万刹崖",
"海澜琼阁",
"海灵仙洲",
"海炼苍穹岛",
"海角天涯",
"海边村庄",
"海音浮屠",
"海魄禁渊",
"涂山",
"涅槃之地",
"涅槃星云",
"涧水宗",
"深山之中",
"深林内部",
"深海龙宫",
"深渊之核",
"深渊核心",
"混元虚海",
"混沌天域",
"混沌山",
"混沌池",
"混沌深渊",
"混沌灵幻谷",
"混沌苍穹",
"混沌遗界",
"清幽山谷",
"清微洞",
"清音山庄",
"清韵灵谷",
"清风涧",
"清风湖",
"渊虹谷",
"渡劫台",
"渡劫岛",
"渡劫峰",
"游龙山",
"湄洲仙界",
"湖底的蛇宫",
"湖心",
"湖心小岛",
"湖心庭",
"湖泊畔",
"湮灭星域",
"源堡",
"漱石居",
"漳州",
"潇湘",
"澜心幻海",
"澜月仙洲",
"澜都",
"瀑布旁",
"灌江口",
"火云洞",
"火山内部",
"火山口",
"火焰山",
"火龙岛",
"灯禾巷",
"灵光岛",
"灵剑峰",
"灵剑涯",
"灵墟谷",
"灵宝山",
"灵宝斋",
"灵山古道",
"灵山寺",
"灵山深径",
"灵山秘境",
"灵岳天峰",
"灵春山庄",
"灵晶秘洞",
"灵气枯竭之地",
"灵气漩涡中心",
"灵气风暴中心",
"灵泉之源",
"灵泉幽谷",
"灵泉旁",
"灵泉谷",
"灵湖",
"灵灼林",
"灵犀仙径",
"灵犀湖",
"灵犀谷",
"灵狐洞",
"灵珀仙原",
"灵田中的石底",
"灵界",
"灵界秘境",
"灵石矿山",
"灵石矿脉",
"灵纹之岛",
"灵脉之巅",
"灵脉力场",
"灵脉所在之地",
"灵脉泉眼",
"灵脉深处",
"灵脉源头",
"灵药山",
"灵药潭",
"灵药禁地",
"灵药空岛",
"灵药谷",
"灵蕴渊",
"灵蕴谷",
"灵蛇潭",
"灵隐洞",
"灵雾山谷",
"灵雾谷",
"灵霄峰",
"灵霄阙",
"灵风峡",
"灵魂莲华",
"炎龙窟",
"炙热沙城",
"炼丹房",
"炼器山",
"烈焰火山",
"烈焰蛇火山",
"烟波湖畔",
"烟雨仙洲",
"烟雨仙渺",
"烟雨桃蹊",
"焚天荒原",
"焚心屿",
"焰空天域",
"照影潭",
"熔岩石桥",
"燧人氏",
"牛牛神界",
"牧野",
"狐狸窝",
"玄光古海",
"玄冰深渊",
"玄冰窟",
"玄冰绝渊",
"玄冰阁",
"玄华仙峰",
"玄域",
"玄天古矿",
"玄天圣域",
"玄天心湖",
"玄天灵峰",
"玄天秘境",
"玄影幻城",
"玄星秘岛",
"玄月幽谷",
"玄灵秘境",
"玄烛岛",
"玄竹林",
"玄竹楼阁",
"玄荼仙宫",
"玄铁矿脉",
"玄霄星域",
"玄霄殿",
"玄霄穹顶",
"玄魂秘地",
"玄黄界",
"玄龙潜渊",
"玄龟岛",
"玉京",
"玉仙山",
"玉兰山脉",
"玉兰瑶岛",
"玉华秘境",
"玉山碧落谷",
"玉泉宫",
"玉泉山",
"玉海归墟",
"玉清天池",
"玉灵幽渊",
"玉烟幻界",
"玉盘湖",
"玉竹山脉",
"玉笛山",
"玉翠琼台",
"玉虚宫",
"玉虚山",
"玉虚岛",
"玉虚崖",
"玉虚问道崖",
"玉衡仙宫",
"玉辰玄峰",
"玉门关",
"玉音山",
"现代城市",
"玲珑剑域",
"玲珑幻境",
"玲珑洞天",
"玲珑阁",
"珊瑚林",
"珑仙境",
"琅琊",
"琅琊福地",
"琉璃",
"琉璃光域",
"琉璃宫",
"琉璃穹顶",
"琴断弦奈何",
"琼华仙府",
"琼华山",
"琼楼玉宇",
"瑶光仙湖",
"瑶光山",
"瑶光川",
"瑶华洞",
"瑶台仙境",
"瑶春山脉",
"瑶池",
"瑶池仙境",
"瑶池天镜",
"璇玑",
"璇玑云墟",
"璇玑仙域",
"田间小屋",
"留白舍",
"番茄的秘密树屋",
"登仙古道",
"登仙台",
"白云城",
"白冥宫",
"白城",
"白帝",
"白帝城",
"白果林",
"白桦",
"白桦树林",
"白泽秘境",
"白玉京",
"白玉仙桥",
"白玉琼楼",
"白玉雪山",
"白羽宫",
"白花山",
"白虎岭",
"白蛇之境",
"白骨岭",
"白鹿仙峰",
"百花山",
"百花谷",
"盘古神殿",
"知竹里",
"知识之海",
"石村号",
"矿脉入口",
"破云山",
"破妄谷",
"破碎星域",
"破碎虚空",
"破镜洞天",
"碎仙渊",
"碎玉滩",
"碎石滩",
"碧春潭",
"碧海云天",
"碧海湾",
"碧海潮生岛",
"碧海茶原",
"碧游宫",
"碧琼临海",
"碧落之港",
"碧落仙居",
"碧落渊",
"神兵遗迹",
"神兽聚集之地",
"神兽聚集地",
"神兽试炼场",
"神农百草原",
"神弃之地",
"神木林",
"神木森林",
"神武大殿",
"神灵降临之地",
"神秘山洞",
"神秘秘境",
"神秘空岛",
"神蛇秘谷",
"神遗之地",
"神魂之境",
"神魔战场",
"禁地内部",
"离恨天",
"离歌",
"秋叶原",
"秋山",
"秘境内部",
"秘境深处",
"秘密拍卖场",
"秘银荒原",
"空中楼阁",
"空无一物的「世界」",
"空明舍",
"空灵岛",
"空间裂缝边缘",
"穿云关",
"竹妃园",
"竹林",
"竹林溪径",
"竹海",
"符咒草原",
"素雪寒原",
"紫极天宫",
"紫炎渊",
"紫炎灵霄殿",
"紫烟洞府",
"紫电苍穹",
"紫竹林",
"紫耀之都",
"紫阳丘",
"紫霄宫",
"紫霄峰",
"紫霄雷池",
"紫霞岭",
"紫霞峰",
"紫霞洞天",
"紫龙山",
"繁花星屿",
"繁花谷",
"红枫林",
"红灵山",
"红莲池",
"红薯",
"终末之地",
"绘梨衣的花园子",
"绘梨衣的菜园子",
"绝世悬崖",
"绝云峰",
"绝尘谷",
"绝影天涯",
"绝龙岭",
"绮梦灵沼",
"绯灵秘境",
"维度之网",
"羽化仙境",
"羽化山",
"翠云谷",
"翠屏山",
"翠微崖",
"翠春林",
"翠春河畔",
"翠竹云谷",
"翠竹仙岛",
"翠竹林",
"翠蛇之池",
"翡冷翠",
"耿",
"聚灵谷",
"肥肥崖崖底",
"育灵池",
"能量转化站",
"腥红之月",
"至尊洞天",
"至纯之境",
"花开碧霄岛",
"花影琼台",
"花径",
"花月秘境",
"花果山",
"花海瑶池",
"花渡寒川",
"花灵仙谷",
"花神忘川",
"花舞幽冥渊",
"花若天央宫",
"花落无痕涧",
"花魂禁地",
"芳菲花谷",
"苍梧",
"苍梧岭",
"苍梧秘境",
"苍生之地",
"苍穹秘岛",
"苍穹遗迹",
"苍穹雪原",
"苍茫天域",
"苍龙潭",
"苔痕别院",
"若叶",
"若水",
"苦情树",
"苦竹林",
"茅草屋",
"茉莉花田",
"茶山深处",
"茶楼小巷",
"茶谷",
"茶香梯田",
"荆棘小径",
"草原深处",
"荒古山脉",
"荒古废墟",
"荒古战场",
"荒古深渊",
"荒古禁地",
"荒古遗址",
"荒漠绿洲",
"荒界",
"荒野深处",
"药王谷",
"莲山",
"莲池幽径",
"莲花坞",
"莲花山",
"莲花楼",
"菜菜子之家",
"萤火虫山谷",
"落云崖",
"落叶山脉",
"落尘天宫",
"落星海",
"落星渊",
"落月崖",
"落花",
"落雪山庄",
"落霞仙渡",
"落霞大平原",
"落霞谷",
"落魄山",
"落魄谷",
"葬灵墟",
"蒲坂",
"蓬莱",
"蓬莱仙山",
"蓬莱仙屿",
"蓬莱仙岛",
"蔚蓝深海",
"薄荷小径",
"藏书殿",
"藏书阁",
"藏剑阁",
"藏经阁",
"虚影森林",
"虚无之境",
"虚无缥缈之域",
"虚无谷",
"虚空密境",
"虚空混沌之地",
"虚空试炼场",
"蚀玉峰",
"蛇之小岛",
"蛇尾竹林",
"蛇影山谷",
"蛇沙滩",
"蛇窟洞天",
"蛇纹迷宫",
"蛇蜿幽谷",
"蛇行小溪",
"蛇鳞森林",
"蛮荒之境",
"蜀山",
"蜿蜒迷林",
"蝶影幽谷",
"蟠桃园",
"血月平原",
"血月沙漠",
"血海秘境",
"裳花蓉",
"西域",
"西岐",
"西岐仙山",
"见山堂",
"观星阁",
"观澜湖",
"访市",
"诗云幻境",
"诗华仙岛",
"诗影幽谷",
"诗月天台",
"诗梦琼阁",
"诗灯古林",
"诗花明镜潭",
"诗雨归峰",
"诗音绝壁",
"诗魂幻渊",
"诸天试炼场",
"谪仙岛",
"谪星卜月庐",
"谪星崖",
"赤松",
"赤水",
"赤炎峰",
"赤炎洞天",
"赤焰崖",
"赤血魔渊",
"赤霄灵阙",
"赤霄禁地",
"赤霞峰",
"赤龙窟",
"超光速传送门",
"踏雪宫",
"轮回幻境",
"辉光沼泽",
"边境战场",
"边际星球",
"远古遗址深处",
"远古遗迹",
"远古遗迹深处",
"远山药园",
"迷雾山脉",
"迷雾森林",
"迷雾禁地",
"逆仙阁",
"逆圣",
"逍遥云海",
"逍遥天境",
"逍遥宫",
"逍遥谷",
"逐月楼",
"逐月竹林",
"通天冥河",
"通天岭",
"通天梧桐林",
"通天河",
"通幽谷",
"逸尘涧",
"逸星川",
"逸枫谷",
"道心禅林",
"遗忘之地",
"遥远星域",
"邀月庭",
"邺水",
"都市街头",
"鄱阳",
"金光圣谷",
"金光川",
"金光洞",
"金烁洞窟",
"金矿山",
"金砂沙漠",
"金羽林地",
"金耀山脉",
"金蛇沙漠",
"金蟾天宫",
"金辉平原",
"金银岛",
"金阙峰",
"金霞之岛",
"金鳌岛",
"金鸡岭",
"金龙之泉",
"鎏光河",
"鎏金域圣辉骏渊庭",
"鎏金域律仪穹渊殿",
"鎏金域永昼辉章殿",
"鎏金域誓约淬金台",
"铜雀台",
"银叶古树",
"银月之森",
"银月峰",
"银月湖",
"银杉古林",
"银杏仙台",
"银杏仙谷",
"银河天桥",
"银河星海",
"银灰秘境",
"银白冰原",
"银白寒潭",
"银白山脉",
"银白殿堂",
"银白禁地",
"银白雪原",
"银色天桥",
"银色幻境",
"银色海湾",
"银色龙潭",
"银花幻境",
"银铃幻境",
"银铃幽谷",
"铸剑山庄",
"铸魂山",
"锁龙涧",
"镇魔塔",
"镜像世界",
"镜月湖",
"镜涵水庭",
"镜渊秘境",
"镜湖深渊",
"镜花水榭",
"长安",
"长水",
"长生之门",
"长生天",
"长生天府",
"长生山脉",
"长生界",
"长生界之门",
"长生界湖",
"长风海",
"闪电管石滩",
"闭关室",
"闭关洞府",
"问心居",
"问道崖",
"阴阳交界",
"阴阳山",
"阴阳谷",
"阴阳道场",
"阴风峡谷",
"阿房宫",
"阿比茨之渊",
"陈塘关",
"陨星窟",
"陨石坠落之地",
"隐仙林",
"隐秘古遗迹",
"雁云城",
"雨落花笙",
"雪兔坞",
"雪山洞窟",
"雪月城",
"雪竹林",
"雪花山",
"雷泽原",
"雷泽潭",
"雷神之岛",
"雷蛇之谷",
"雷雨山",
"雷霆峰",
"雷霆崖",
"雷霆谷地",
"雷鸣崖",
"雾丘",
"雾凇河畔",
"雾色山脉",
"雾隐仙峤",
"雾隐仙阁",
"雾隐楼台",
"霜冷涧",
"霜华谷",
"霜原",
"霜月山",
"青丘",
"青丘仙泽",
"青丘狐宫",
"青云寨",
"青云山",
"青云岛",
"青云峡",
"青云峰",
"青冥渊",
"青华山",
"青原",
"青墨岛",
"青峡谷",
"青州",
"青春古道",
"青木峡",
"青灵仙峰",
"青烟镇",
"青玄岭",
"青禾小院",
"青羽山",
"青莲池",
"青莲秘境",
"青莲道场",
"青虹剑宗",
"青衣门",
"青铜仙殿",
"青雀宫",
"青霄峰",
"青霄灵墟",
"青霞平原",
"青青草原",
"青鸾仙渚",
"青鸾域",
"青龙关",
"青龙池",
"青龙潭",
"青龙轩",
"须弥山",
"须弥幻境",
"风华绝代",
"风啸雪岭",
"风岚天涯",
"风影秘谷",
"风暴之巅",
"风月谷",
"风涌绿洲",
"风烛之森",
"风痕石原",
"风祝山巅",
"风语流砂",
"风辰荒岛",
"风铃云径",
"风雾海",
"飞云洞",
"飞仙谷",
"飞星崖",
"飞星谷",
"飞霞琼阁",
"首阳山",
"高山之巅",
"高空云端",
"魑魅窟",
"魔帝领域",
"魔影山脉",
"魔法密林",
"魔渊岛",
"魔焰峡谷",
"魔焰沼泽",
"魔窟深处",
"鸿蒙仙阙",
"鸿蒙宇宙",
"鸿蒙星域",
"鸿蒙虚空",
"鹤鸣山",
"黄河旁",
"黄金之域",
"黑与白的失落群星",
"黑暗大殿",
"黑泥潭",
"黑洞空间",
"黑风涧",
"齐云山",
"齐州",
"龙宫",
"龙影山脉",
"龙族圣地",
"龙族遗迹",
"龙晶废墟",
"龙渊灵境",
"龙湾",
"龙潭渊",
"龙穴深处",
"龙脉源头",
"龙脊云巅",
"龙腾大陆",
"龙虎山",
"龙门关",
"龙骨荒原",
"龙骨遗迹",
        ];
        // 传送点
        let isFirstPasswordCheck = true; // 用于标记是否是第一次密码验证
        let hasSearched = false; // 用于标记是否已经进行过查找操作

        // 自定义传送点（仙居）数组
        let customPortals = [];
        let currentPortals = []; // 用于存储当前使用的传送点集合
        // 用于存储第一种传送点的数组
        let portalsOne = [];
        // 用于存储第二种传送点的数组
        let portalsTwo = [];
        // 从locations数组中提取传送点并存入portalsOne和portalsTwo
        function setupPortals() {
            let index = 0;
            // 提取第一种传送点（每五十个取一个）
            while (index < locations.length) {
                portalsOne.push(locations[index]);
                index += 50;
            }
            // 提取第二种传送点（每四十个取一个，从第1个位置开始）
            index = 0;
            while (index < locations.length) {
                portalsTwo.push(locations[index]);
                index += 40;
            }
        }

        // 调用函数设置传送点
        setupPortals();

        console.log("Portals One:", portalsOne);
        console.log("Portals Two:", portalsTwo);

        function switchToPortalOne() {
            currentPortals = portalsOne;
            document.getElementById('resultBox').innerHTML = ''; // 清空结果显示区域
            let portalsOneContent = '天四以上传送点：<br>';
            portalsOne.forEach(portal => {
                portalsOneContent += `${portal}<br>`;
            });
            const resultBox = document.getElementById('resultBox');
            if (resultBox) {
                resultBox.innerHTML = portalsOneContent;
            }
            // 创建提示信息元素
            const tipElement = document.createElement('div');
            tipElement.textContent = '已切换到天四以上传送点。';
            tipElement.style.position = 'fixed';
            tipElement.style.top = '10px';
            tipElement.style.right = '10px';
            tipElement.style.backgroundColor = 'rgba(0, 0, 0, 0.7)';
            tipElement.style.color = 'white';
            tipElement.style.padding = '5px 10px';
            tipElement.style.borderRadius = '3px';
            // 将提示信息元素添加到页面中
            document.body.appendChild(tipElement);
            // 设置一段时间后自动隐藏提示信息
            setTimeout(() => {
                document.body.removeChild(tipElement);
            }, 3000); // 3秒后隐藏提示信息
        }

        function switchToPortalTwo() {
            currentPortals = portalsTwo;
            document.getElementById('resultBox').innerHTML = ''; // 清空结果显示区域
            let portalsTwoContent = '天四以下传送点：<br>';
            portalsTwo.forEach(portal => {
                portalsTwoContent += `${portal}<br>`;
            });
            const resultBox = document.getElementById('resultBox');
            if (resultBox) {
                resultBox.innerHTML = portalsTwoContent;
            }
            const tipElement = document.createElement('div');
            tipElement.textContent = '已切换到天四以下传送点。';
            tipElement.style.position = 'fixed';
            tipElement.style.top = '10px';
            tipElement.style.right = '10px';
            tipElement.style.backgroundColor = 'rgba(0, 0, 0, 0.7)';
            tipElement.style.color = 'white';
            tipElement.style.padding = '5px 10px';
            tipElement.style.borderRadius = '3px';
            document.body.appendChild(tipElement);
            setTimeout(() => {
                document.body.removeChild(tipElement);
            }, 2000);
        }

        function switchPortal() {
            const selectedPortalType = document.getElementById('portalTypeMenu').value;
            if (selectedPortalType === 'portalOne') {
                currentPortals = portalsOne;
                document.getElementById('resultBox').innerHTML = '';
                let portalsOneContent = '天四以上传送点：<br>';
                portalsOne.forEach(portal => {
                    portalsOneContent += `${portal}<br>`;
                });
                const resultBox = document.getElementById('resultBox');
                if (resultBox) {
                    resultBox.innerHTML = portalsOneContent;
                }
                const tipElement = document.createElement('div');
                tipElement.textContent = '已切换到天四以上传送点。';
                tipElement.style.position = 'fixed';
                tipElement.style.top = '10px';
                tipElement.style.right = '10px';
                tipElement.style.backgroundColor = 'rgba(0, 0, 0, 0.7)';
                tipElement.style.color = 'white';
                tipElement.style.padding = '5px 10px';
                tipElement.style.borderRadius = '3px';
                document.body.appendChild(tipElement);
                setTimeout(() => {
                    document.body.removeChild(tipElement);
                }, 3000);
            } else if (selectedPortalType === 'portalTwo') {
                currentPortals = portalsTwo;
                document.getElementById('resultBox').innerHTML = '';
                let portalsTwoContent = '天四以下传送点：<br>';
                portalsTwo.forEach(portal => {
                    portalsTwoContent += `${portal}<br>`;
                });
                const resultBox = document.getElementById('resultBox');
                if (resultBox) {
                    resultBox.innerHTML = portalsTwoContent;
                }
                const tipElement = document.createElement('div');
                tipElement.textContent = '已切换到天四以下传送点。';
                tipElement.style.position = 'fixed';
                tipElement.style.top = '10px';
                tipElement.style.right = '10px';
                tipElement.style.backgroundColor = 'rgba(0, 0, 0, 0.7)';
                tipElement.style.color = 'white';
                tipElement.style.padding = '5px 10px';
                tipElement.style.borderRadius = '3px';
                document.body.appendChild(tipElement);
                setTimeout(() => {
                    document.body.removeChild(tipElement);
                }, 2000);
            }
        }

        window.onload = function() {
            // 检查是否从登录页面跳转过来
            const isLoggedIn = localStorage.getItem('isLoggedIn');
            if (isLoggedIn === 'true') {
                const storedPassword = localStorage.getItem('password');
                if (storedPassword) {
                    document.getElementById('passwordInput').value = storedPassword;
                }
            }
        }

        function findNearestPortal() {
            const inputPassword = document.getElementById('passwordInput').value;
            const correctPassword = "ikun";
            if (inputPassword !== correctPassword) {
                document.getElementById('errorImage').style.display = "block";
                showAlert("密码错误，请重新输入\n( ⸝⸝⸝•_•⸝⸝⸝ )♡( ⸝⸝⸝•_•⸝⸝⸝ )♡\n( ⸝⸝⸝•_•⸝⸝⸝ )♡( ⸝⸝⸝•_•⸝⸝⸝ )♡\n( ⸝⸝⸝•_•⸝⸝⸝ )♡( ⸝⸝⸝•_•⸝⸝⸝ )♡\n( ⸝⸝⸝•_•⸝⸝⸝ )♡( ⸝⸝⸝•_•⸝⸝⸝ )♡", false);
                return;
            } else {
                document.getElementById('errorImage').style.display = "none";
                if (isFirstPasswordCheck) {
                    showAlert("密码验证成功！", true);
                    isFirstPasswordCheck = false;
                    passwordEntered = true; // 密码验证成功后标记为已输入
                }
            }
            // 其他代码保持不变
            const inputLocation = document.getElementById('locationInput').value.trim();
            let locationIndex = locations.indexOf(inputLocation);
            if (locationIndex === -1) {
                const resultContainer = document.createElement('div');
                resultContainer.id = 'matchingListContainer';
                if (inputLocation.length === 1) {
                    const firstChar = inputLocation.charAt(0);
                    const matchingLocations = locations.filter(location => location.charAt(0) === firstChar);
                    if (matchingLocations.length > 0) {
                        const matchingList = document.createElement('ul');
                        matchingList.id = 'matchingList';
                        matchingLocations.forEach((location) => {
                            const listItem = document.createElement('li');
                            // 修改序号生成方式
                            listItem.textContent = `${location}(${locations.indexOf(location) + 1})`;
                            listItem.addEventListener('click', () => {
                                const locationWithoutNumber = location;
                                document.getElementById('locationInput').value = locationWithoutNumber;
                                findNearestPortal();
                            });
                            matchingList.appendChild(listItem);
                        });
                        resultContainer.appendChild(matchingList);
                    } else {
                        resultContainer.textContent = '没有以该字开头的地点。';
                    }
                } else {
                    const matchingLocations = locations.filter(location => location.startsWith(inputLocation));
                    if (matchingLocations.length > 0) {
                        const matchingList = document.createElement('ul');
                        matchingList.id = 'matchingList';
                        matchingLocations.forEach((location) => {
                            const listItem = document.createElement('li');
                            // 修改序号生成方式
                            listItem.textContent = `${location}(${locations.indexOf(location) + 1})`;
                            listItem.addEventListener('click', () => {
                                const locationWithoutNumber = location;
                                document.getElementById('locationInput').value = locationWithoutNumber;
                                findNearestPortal();
                            });
                            matchingList.appendChild(listItem);
                        });
                        resultContainer.appendChild(matchingList);
                    } else {
                        resultContainer.textContent = '没有匹配的地点。';
                    }
                }
                const result = document.getElementById('resultBox');
                result.innerHTML = '';
                result.appendChild(resultContainer);
                return;
            }
            const selectedPortalType = document.getElementById('portalTypeMenu').value;
            let searchLocations;
            if (selectedPortalType === 'portalOne') {
                searchLocations = portalsOne;
            } else if (selectedPortalType === 'portalTwo') {
                searchLocations = portalsTwo;
            }
            let nearestPortal = null;
            let minDistance = Infinity;
            for (const portal of searchLocations) {
                let portalLocationIndex = locations.indexOf(portal);
                const distance = Math.abs(portalLocationIndex - locationIndex);
                if (distance < minDistance) {
                    minDistance = distance;
                    nearestPortal = portal;
                }
            }
            let nearestCustomPortal = null;
            let minCustomDistance = Infinity;
            for (const portal of customPortals) {
                let portalLocationIndex = locations.indexOf(portal);
                const distance = Math.abs(portalLocationIndex - locationIndex);
                if (distance < minCustomDistance) {
                    minCustomDistance = distance;
                    nearestCustomPortal = portal;
                }
            }
            const resultDiv = document.getElementById('resultBox');
            resultDiv.innerHTML = '';
            if (nearestPortal || nearestCustomPortal) {
                const portalResultDiv = document.createElement('div');
                portalResultDiv.style.backgroundColor = '#e6f7ff';
                const portalResultTextBox = document.createElement('input');
                portalResultTextBox.type = 'text';
                portalResultTextBox.readOnly = true;
                const moveResultTextBox = document.createElement('input');
                moveResultTextBox.type = 'text';
                moveResultTextBox.readOnly = true;
                if (minDistance < minCustomDistance) {
                    portalResultTextBox.value = `传送 ${nearestPortal}`;
                    const copyButtonForPortal = document.createElement('button');
                    copyButtonForPortal.textContent = '复制传送结果';
                    copyButtonForPortal.addEventListener('click', () => {
                        const textToCopy = `传送 ${nearestPortal}`;
                        copyToClipboard(textToCopy);
                    });
                    const portalResultContainer = document.createElement('div');
                    portalResultContainer.className = 'copy-result-container';
                    portalResultContainer.appendChild(portalResultTextBox);
                    portalResultContainer.appendChild(copyButtonForPortal);
                    portalResultDiv.appendChild(portalResultContainer);
                } else {
                    portalResultTextBox.value = `仙居瞬移 ${nearestCustomPortal}`;
                    const copyButtonForCustomPortal = document.createElement('button');
                    copyButtonForCustomPortal.textContent = '复制瞬移结果';
                    copyButtonForCustomPortal.addEventListener('click', () => {
                        const textToCopy = `仙居瞬移 ${nearestCustomPortal}`;
                        copyToClipboard(textToCopy);
                    });
                    const customPortalResultContainer = document.createElement('div');
                    customPortalResultContainer.className = 'copy-result-container';
                    customPortalResultContainer.appendChild(portalResultTextBox);
                    customPortalResultContainer.appendChild(copyButtonForCustomPortal);
                    portalResultDiv.appendChild(customPortalResultContainer);
                }
                moveResultTextBox.value = `移动 ${inputLocation}`;
                const copyButtonForMove = document.createElement('button');
                copyButtonForMove.textContent = '复制移动结果';
                copyButtonForMove.addEventListener('click', () => {
                    const textToCopy = `移动 ${inputLocation}`;
                    copyToClipboard(textToCopy);
                });
                const moveResultContainer = document.createElement('div');
                moveResultContainer.className = 'copy-result-container';
                moveResultContainer.appendChild(moveResultTextBox);
                moveResultContainer.appendChild(copyButtonForMove);
                portalResultDiv.appendChild(moveResultContainer);
                resultDiv.appendChild(portalResultDiv);
                showAlert("查找成功！已找到相关传送点。", true);
            } else {
                resultDiv.innerHTML = '没有找到合适的传送点。';
            }
        }

        function copyToClipboard(text) {
            const textarea = document.createElement('textarea');
            textarea.value = text;
            document.body.appendChild(textarea);
            textarea.select();
            try {
                document.execCommand('copy');
                console.log('已复制到剪贴板');
                showAlert('复制成功：' + text, true);
            } catch (err) {
                console.error('复制失败: ', err);
                showAlert('复制失败：' + text + '，请重试。', false);
            }
            document.body.removeChild(textarea);
        }

        // 初始化时默认使用传送点一
        switchToPortalOne();

        function addCustomPortals() {
            const customInput = document.getElementById('customInput').value.trim();
            if (customInput === "") {
                showAlert("添加内容不能为空，请输入地图名。", false);
                return;
            }
            const customLocations = customInput.split('\n').map(loc => loc.trim()).filter(loc => loc !== '');
            let invalidLocations = [];
            let validLocations = [];
            for (const loc of customLocations) {
                if (!locations.includes(loc)) {
                    invalidLocations.push(loc);
                } else if (!customPortals.includes(loc)) {
                    customPortals.push(loc);
                    validLocations.push(loc);
                }
            }
            if (invalidLocations.length > 0) {
                showAlert(`以下地点不存在：\n${invalidLocations.join('\n')}`, false);
            }
            if (validLocations.length > 0) {
                showAlert(`成功添加以下地图到仙居列表：\n${validLocations.join('\n')}`, true);
            }
        }
    </script>
</body>

</html>